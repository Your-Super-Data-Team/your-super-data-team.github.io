<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <title>Your Super Ad Name Helper</title>
    <style>
        .output {
            text-indent:1em;
            color:#ff8c00;
            overflow-wrap: break-word;
        }
        .output-code {
            margin-left:1em;
        }
        .output-row {
            margin-bottom:1em;
        }
        h3 {font-size:1.5rem;}
    </style>
  </head>
  <body>
    <div class="container">
        <div class="row page-header" style="margin-top:2em;">
            <div class="col-sm">
                <h1>Your Super Campaign &amp; Ad Naming Helper</h1>
            </div>
        </div>
        <div class="row" style="height:2em;"></div> <!-- spacer -->
        <div class="row">
            <div class="col-md">
                <h2>Campaign Name</h2>
            </div>
        </div>
        <div class="row output-row"> <!-- campaign name output -->
            <div class="col-md">
                <h3 id="output" class="output">Output example</h3>
                <div class="form-group output-code row">
                    <!-- <input type="text" value="" name="" id="output_code"/> -->
                    <label for="output_code" class="col-sm-2 col-form-label">For Copy &amp; Paste</label>
                    <div class="col-sm-10">
                        <textarea class="form-control" id="output_code" rows="1"></textarea>
                    </div>
                </div>
            </div>
        </div>
        <div class="row output-row" id="row_adgroup"> <!-- ad group name -->
            <div class="col-md">
                <h3>Ad Group</h3>
                <!-- <div class="alert alert&#45;info output&#45;code" role="alert"> -->
                <!--     This is a short format for new ad groups. -->
                <!-- </div> -->
                <h3 id="output_adgroup" class="output"> Adgroup </h3>
                <div class="form-group output-code row">
                    <label for="output_code" class="col-sm-2 col-form-label">For Copy &amp; Paste</label>
                    <div class="col-sm-10">
                        <textarea class="form-control" id="output_code_adgroup" rows="1"></textarea>
                    </div>
                </div>
            </div>
        </div>
        <div class="row output-row" id="row_utm"> <!-- link with utm tags -->
            <div class="col-md">
                <h3>Link with UTM Tags</h3>
                <div class="form-group output-code row">
                    <label for="output_code" class="col-sm-2 col-form-label">For Copy &amp; Paste</label>
                    <div class="col-sm-10">
                        <textarea class="form-control" id="output_code_utm" rows="2"></textarea>
                    </div>
                </div>
            </div>
        </div>
        <div class="row" style="height:2em;"></div>
        <div class="row">
            <form id="categories">
            <div class="row">
                <div class="col-sm">
                    <div class="mb-3">
                        <label for="channel" class="form-label">Channel</label>
                        <select class="form-select" aria-label="Channel Selector" name="Ad channel" id="channel">
                            <option value="PaidSocial">Paid Social</option>
                            <option value="PaidSearch">Paid Search</option>
                            <option value="Video">Video</option>
                            <option value="Shopping">Shopping</option>
                            <option value="Affiliate">Affiliate</option>
                            <option value="Display">Display</option>
                            <option value="Influencer">Influencer</option>
                        </select>
                    </div>
                    <!-- <button type="submit" class="btn btn&#45;primary">Submit</button> -->
                </div>
                <div class="col-sm">
                    <div class="mb-3">
                        <label for="region" class="form-label">Region</label>
                        <select class="form-select" aria-label="Channel Selector" id="region">
                            <option value="US">United States</option>
                            <option value="EU">European Union</option>
                            <option value="DE">Germany</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm">
                    <div class="mb-3">
                        <label for="platform" class="form-label">Platform</label>
                        <select class="form-select" aria-label="Channel Selector" id="platform">
                            <option value="FB">Facebook</option>
                            <option value="GOOGL">Google</option>
                            <option value="BNG">Bing</option>
                            <option value="YT">YouTube</option>
                            <option value="PIN">Pinterest</option>
                            <option value="Criteo">Criteo</option>
                            <option value="TT">TikTok</option>
                            <option value="Acuity">Acuity</option>
                        </select>
                    </div>
                </div>
                <div class="col-sm">
                    <div class="mb-3">
                        <label for="tactic" class="form-label">Tactic</label>
                        <select class="form-select" aria-label="Channel Selector" id="tactic">
                            <option value="PROS">Prospecting</option>
                            <option value="RET">Retargeting</option>
                            <option value="Mixed">Mixed</option>
                            <option value="AP">After Purchase</option>
                            <option value="NB">Non-Branded</option>
                            <option value="B">Branded</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm">
                    <div class="mb-3">
                        <label for="productCategory" class="form-label">Product Category</label>
                        <input type="text" class="form-control" id="productCategory" autocomplete="on">
                        <small class="form-text text-muted">Multiple words will be combined using CamelCase style for the names and dash-lower for UTM tags.</small>
                    </div>
                </div>
                <div class="col-sm">
                    <div class="mb-3">
                        <label for="audience" class="form-label">Audience</label>
                        <input type="text" class="form-control" id="audience" autocomplete="on">
                        <small class="form-text text-muted">Multiple words will be combined using CamelCase style for the names and dash-lower for UTM tags.</small>
                    </div>
                </div>
                <div class="col-sm">
                    <div class="mb-3">
                        <label for="is_experiment" class="form-check-label">Is An Experiment</label>
                        <br/>
                        <input type="checkbox" class="form-check-input" id="is_experiment">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md" style="padding-top:3rem;">
                    <h3>Additional detail for the UTM tags</h3>
                </div>
            </div>
            <div class="row">
                <div class="col-sm">
                    <div class="mb-3">
                        <label for="landingPage" class="form-label">Landing Page</label>
                        <input type="text" class="form-control" id="landingPage" value="https://yoursuper.com" autocomplete="on">
                        <small class="form-text text-muted">Used when building the link with UTM tags</small>
                    </div>
                </div>
                <div class="col-sm">
                    <div class="mb-3">
                        <label for="utmContent" class="form-label">UTM Content Tag (optional)</label>
                        <input type="text" class="form-control" id="utmContent" autocomplete="on">
                        <small class="form-text text-muted">You can use this to identify the creative in the ad. If this is blank, it will use information from the ad name section below.</small>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md" style="padding-top:3rem;">
                    <h3>Ad Name</h3>
                </div>
            </div>
            <div class="row output-row"> <!-- Ad Name output -->
                <div class="col-md">
                    <h3 id="output_ad" class="output">Ad_Name</h3>
                    <div class="form-group output-code row">
                        <!-- <input type="text" value="" name="" id="output_code"/> -->
                        <label for="output_code_ad" class="col-sm-2 col-form-label">For Copy &amp; Paste</label>
                        <div class="col-sm-10">
                            <textarea class="form-control" id="output_code_ad" rows="1"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm">
                    <div class="mb-3">
                        <label for="ad_content_type" class="form-label">Ad Content Type</label>
                        <select class="form-select" aria-label="ad_content_type" id="ad_content_type">
                            <option value="Stc">Static Ads</option>
                            <option value="Car">Static Carousel</option>
                            <option value="Dyn">Dynamic Static</option>
                            <option value="DCA">Dynamic Creative Ad</option>
                            <option value="CDy">Dynamic Carousel</option>
                            <option value="PLA">Product Listing Ad</option>
                            <option value="T">Text Only Ad</option>
                            <option value="Vid">Video Ad</option>
                        </select>
                    </div>
                </div>
                <div class="col-sm">
                    <div class="mb-3">
                        <label for="ad_language" class="form-label">Ad Language</label>
                        <select class="form-select" aria-label="ad_language" id="ad_language">
                            <option value="EN">English</option>
                            <option value="DE">German</option>
                            <option value="NL">Dutch</option>
                            <option value="FR">French</option>
                        </select>
                    </div>
                </div>
                <div class="col-sm">
                    <div class="mb-3">
                        <label for="ad_content_focus" class="form-label">Content Focus</label>
                        <input type="text" class="form-control" id="ad_content_focus" autocomplete="on">
                        <small class="form-text text-muted">You can use this to identify what the ad focuses on (NYNY21, etc).</small>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm">
                    <div class="mb-3">
                        <label for="ad_image_name" class="form-label">Image or Video Name</label>
                        <input type="text" class="form-control" id="ad_image_name" autocomplete="on">
                        <small class="form-text text-muted">This identifies which image or video the ad uses. It can also be left blank.</small>
                    </div>
                </div>
                <div class="col-sm" id="row_video_length">
                    <div class="mb-3">
                        <label for="ad_video_length" class="form-label">Video Length (optional)</label>
                        <input type="number" class="form-control" id="ad_video_length" autocomplete="on">
                        <small class="form-text text-muted">The length of the video in seconds; Numbers only</small>
                    </div>
                </div>
                <div class="col-sm">
                    <div class="mb-3">
                        <label for="ad_copy_name" class="form-label">Copy Name</label>
                        <input type="text" class="form-control" id="ad_copy_name" autocomplete="on">
                        <small class="form-text text-muted">Use this to identify the copy used in the ad.</small>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm">
                    <div class="mb-3">
                        <label for="ad_destination_name" class="form-label">Destination Name</label>
                        <input type="text" class="form-control" id="ad_destination_name" autocomplete="on">
                        <small class="form-text text-muted">A name for the page the ad directs to</small>
                    </div>
                </div>
                <div class="col-sm">
                    <div class="mb-3">
                        <label for="ad_destination_type" class="form-label">Destination Type</label>
                        <select class="form-select" aria-label="ad_destination_type" id="ad_destination_type">
                            <option value="LP">Landing Page</option>
                            <option value="PDP">Product Detail Page</option>
                            <option value="PLP">Product Listing Page</option>
                            <option value="BP">Blog</option>
                            <option value="O">Other</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm">
                    <div class="mb-3">
                        <label for="ad_tactic" class="form-label">Ad Tactic</label>
                        <select class="form-select" aria-label="Channel Selector" id="ad_tactic">
                            <option value="PROS">Prospecting</option>
                            <option value="RET">Retargeting</option>
                            <option value="Mixed">Mixed</option>
                            <option value="AP">After Purchase</option>
                            <option value="NB">Non-Branded</option>
                            <option value="B">Branded</option>
                        </select>
                    </div>
                </div>
                <div class="col-sm">
                    <div class="mb-3">
                        <label for="ad_note" class="form-label">Ad Note (may not be needed)</label>
                        <input type="text" class="form-control" id="ad_note" autocomplete="on">
                        <small class="form-text text-muted">Any other information you want to include (optional)</small>
                    </div>
                </div>
            </div>
            </form>
        </div>
        <div style="height:5em;"></div>
    </div>

    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
    <script src="js/lodash.min.js"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js" integrity="sha384-q2kxQ16AaE6UbzuKqyBE9/u/KzioAlnx2maXQHiDX9d4/zp8Ok3f+M7DPm+Ib6IU" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.min.js" integrity="sha384-pQQkAEnwaBkjpqZ8RU1fF1AKtTcHJwFl3pblpTlHXybJjHpMYo79HY3hIi4NKxyj" crossorigin="anonymous"></script>
    -->

    <script>
        const utm_source_map = {'FB': 'facebook', 'GOOGL': 'google', 'BNG': 'bing', 'YT': 'youtube', 'PIN': 'pinterest', 'Criteo': 'criteo', 'TT': 'tiktok', 'Acuity': 'acuity'}
        const formElement = document.querySelector('#categories');
        const output = document.querySelector('#output');
        const output_code = document.querySelector('#output_code');
        // For the Ad Group
        const row_adgroup = document.querySelector('#row_adgroup');
        const output_adgroup = document.querySelector('#output_adgroup');
        const output_code_adgroup = document.querySelector('#output_code_adgroup');
        // For the UTM Tag
        const output_code_utm = document.querySelector('#output_code_utm');
        // For the Ad Name
        const output_ad = document.querySelector('#output_ad');
        const output_code_ad = document.querySelector('#output_code_ad');

        formElement.addEventListener('change', updateValue);

        function clean(given_string) {
            return _.upperFirst(_.camelCase(given_string).replace(/_|\s/gi, ""));
        }
        function dash_lower(given_string) {
            return _.snakeCase(given_string).replace(/_/gi, "-")
        }
        function maybe_add_trailing_slash(url){
            var lastChar = url.substr(-4); // Selects the last character
            if (lastChar == '.com') {      // If the last character is not a slash
               url = url + '/';            // Append a slash to it.
            }
            return url;
        }
        function adgroup_name( product_category_raw, audience_raw, is_experiment_raw ) {
            var name_adgroup = ``;
            if (product_category_raw || audience_raw || is_experiment_raw) {
                name_adgroup = name_adgroup + clean(product_category_raw) + "_" + clean( audience_raw )
            }
            if (is_experiment_raw.length > 0) {
                name_adgroup = name_adgroup + "_" + is_experiment_raw
            }
            return name_adgroup;
        }
        function maybe_term(channel_raw, audience_raw) {
            // return term value if this isn't paid search
            if (channel_raw == 'PaidSearch' || audience_raw.length == 0) {
                return '';
            } else {
                return `&utm_term=${dash_lower(audience_raw)}`;
            }
        }
        function maybe_content(utm_content_raw, ad_image_name, ad_copy_name){
            let content = (utm_content_raw.length == 0) ? `${dash_lower(ad_image_name)}--${dash_lower(ad_copy_name)}` : dash_lower(utm_content_raw)
            if (content.length == 0) {
                return '';
            } else {
                return `&utm_content=${content}`;
            }
        }
        function build_image_video_name(ad_image_name, ad_video_length) {
            var image_video_name = clean(ad_image_name)
            if (ad_video_length.length > 0) {
                image_video_name = image_video_name + "-" + ad_video_length + "s"
            }
            return image_video_name;
        }

        function updateValue(e) {
            // Values
            let channel_raw = formElement.elements['channel'].value;
            let region_raw = formElement.elements['region'].value;
            let platform_raw = formElement.elements['platform'].value;
            let tactic_raw = formElement.elements['tactic'].value;
            // Related to Ad Group / Ad Set
            let product_category_raw = formElement.elements['productCategory'].value;
            let audience_raw = formElement.elements['audience'].value;
            let is_experiment_raw = formElement.elements['is_experiment'].checked ? "Exp" : "";
            // Related to UTM tags
            let landing_page_raw = formElement.elements['landingPage'].value;
            let utm_content_raw = formElement.elements['utmContent'].value;
            // Related to ad name
            let ad_content_type = formElement.elements['ad_content_type'].value;
            let ad_language = formElement.elements['ad_language'].value;
            let ad_content_focus = formElement.elements['ad_content_focus'].value;
            let ad_image_name = formElement.elements['ad_image_name'].value;
            let ad_copy_name = formElement.elements['ad_copy_name'].value;
            let ad_destination_name = formElement.elements['ad_destination_name'].value;
            let ad_destination_type = formElement.elements['ad_destination_type'].value;
            let ad_tactic = formElement.elements['ad_tactic'].value;
            let ad_note = formElement.elements['ad_note'].value;
            let ad_video_length = formElement.elements['ad_video_length'].value;

            // Make the two tactic forms match

            // Build Campaign & UTM
            let campaign_name_base = `${channel_raw}_${region_raw}_${platform_raw}_${tactic_raw}`;
            let name_adgroup = adgroup_name( product_category_raw, audience_raw, is_experiment_raw );

            if (name_adgroup.length > 0) {
                // row_adgroup.hidden = false;
                var campaign_name = `${campaign_name_base}_${name_adgroup}_C1`
            } else if (name_adgroup.length == 0) {
                // row_adgroup.hidden = true;
                var campaign_name = `${campaign_name_base}_C1`
            }

            // Build Ad Name
            // let ad_name_base = `${ad_content_type}_${clean(ad_content_focus)}_${clean(ad_image_name)}_${clean(ad_copy_name)}_${clean(ad_destination_name)}_${ad_destination_type}_${ad_language}_${clean(ad_note)}_YS1`
            let ad_name_base = `${ad_content_type}_${clean(ad_content_focus)}_${build_image_video_name(ad_image_name,ad_video_length)}_${clean(ad_copy_name)}_${clean(ad_destination_name)}_${ad_destination_type}_${ad_language}_${ad_tactic}_${clean(ad_note)}_YS2`

            // Display Campaign and AdGroup Name
            output.textContent = campaign_name;
            output_code.value = campaign_name;
            output_adgroup.textContent = (name_adgroup.length > 0) ? name_adgroup : "No Product or Audience Defined";
            output_code_adgroup.value = name_adgroup;

            // Display Ad Name
            output_ad.textContent = ad_name_base
            output_code_ad.value = ad_name_base

            // Build UTM
            link_utm = `${maybe_add_trailing_slash(landing_page_raw)}?utm_source=${dash_lower(utm_source_map[platform_raw])}&utm_medium=${dash_lower(channel_raw)}&utm_campaign=${campaign_name}${maybe_term(channel_raw, audience_raw)}${maybe_content(utm_content_raw, ad_image_name, ad_copy_name)}`;
            output_code_utm.value = link_utm;
        }

        updateValue()
    </script>
  </body>
</html>
